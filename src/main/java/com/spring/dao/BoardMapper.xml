<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<!-- namespace = 연결되는 인터페이스 -->    
<mapper namespace="com.spring.dao.BoardInter">
	
	<select id="myWriteList" parameterType="map" resultType="com.spring.dto.BoardDTO">
		<!-- SELECT rnum, board_no, board_title, board_date 
		FROM (SELECT ROW_NUMBER() OVER(ORDER BY board_date DESC) AS rnum, board_no, board_title, board_date 
			FROM board WHERE member_id = 'test') 
		WHERE rnum BETWEEN #{sNum} AND #{eNum} -->
      
		SELECT rnum, board_no, board_title, board_date, member_id 
		FROM (SELECT ROW_NUMBER() OVER(ORDER BY board_date DESC) AS rnum, board_no, board_title, board_date, member_id FROM board) 
		<where>
			rnum BETWEEN #{sNum} AND #{eNum} AND member_id = #{userId}
		</where>
	</select>
   
	<select id="myWriteListCnt" parameterType="map" resultType="int">
   		SELECT COUNT(*) FROM board 
   		<where>
   			member_id = #{userId}
   		</where>
	</select>
	
	<select id="myReplyList" parameterType="map" resultType="com.spring.dto.ReplyDTO">
		SELECT rnum, board_no, reply_content, reply_date, member_id 
      	FROM (SELECT ROW_NUMBER() OVER(ORDER BY reply_date DESC) AS rnum, board_no, reply_content, reply_date, member_id FROM reply)
      	<where>
      		rnum BETWEEN #{sNum} AND #{eNum} AND member_id = #{userId}
      	</where>
	</select>
	
   	<select id="myReplyListCnt" parameterType="map" resultType="int">
   		SELECT COUNT(*) FROM reply 
   		<where>
   			member_id = #{userId}
   		</where>
	</select>
</mapper>